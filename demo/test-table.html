<link rel="import" href="../../../ldwebapp/bower_components/polymer/polymer.html">
<link rel="import" href="../../juicy-table-repeat/juicy-table-repeat.html">
<dom-module id="test-table">
	<template>
		<style is="custom-style">
			.a {
				background-color: red;
			}
			.b {
				background-color: blue;
			}
			.c {
				background-color: green;
			}
		</style>
		
		<div>fixed</div>
		<template is="dom-if" if="{{controlFlag}}">
			<div>City</div>
		</template>
		
		<juicy-table-repeat rows={{items}}>
			<table>
		    	<thead>
			      	<tr>
						<th>Name</th>
						<th>Age</th>
						<template is="dom-if" if="{{controlFlag}}">
							<th>City</th>
						</template>
					</tr>
		    	</thead>
		    	<tbody>
		    	</tbody>
		    </table>
		    <template is="dom-template" class="row-template">
		        <table>
		            <tr>
						<template is="dom-repeat" as="column" items={{columns}}>
							<td class$="{{getClass(index)}}">[[getText(index, item)]]</td>
						</template>
					</tr>
		        </table>
		    </template>
		    <template is="dom-repeat" as="column" items={{columns}}>
				<div class$="{{getClass(index)}}">[[column.name]]</div>
			</template>
		</juicy-table-repeat>

		<table>
			<thead>
				<tr>
					<th>Name</th>
					<th>Age</th>
					<th>City</th>
				</tr>
			</thead>
			
			<tbody>
				<template is="dom-repeat" items={{items}}>
					<tr>
						<template is="dom-repeat" as="column" items={{columns}}>
							<td class$="{{getClass(index)}}">[[getText(index, item)]]</td>
						</template>
					</tr>
				</template>
			</tbody>
		
		</table>

	</template>

	<script>
		Polymer({
			is : 'test-table',
			properties : {
				controlFlag : {
					type : Boolean,
					value : false
				}
			},
			ready : function() {
				this.columns = [
		            {name: 'Name', property: 'name', 'class': 'a'},
		            {name: 'Age', property: 'age', 'class': 'b'},
		            {name: 'City', property: 'city', 'class': 'c'}
	          	];
				this.items = [
					{name: 'Peter', age: '31', city: 'Bern'},
		            {name: 'Susanne', age: '22', city: 'Luzern'},
		            {name: 'Thom', age: '53', city: 'Olten'}
				];
			},
			getText : function(index, item) {
				return item[this.columns[index]['property']]
			},
			getClass : function(index) {
				return this.columns[index]['class']
			}
		});
	</script>
</dom-module>